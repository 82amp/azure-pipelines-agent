parameters:
- name: releaseId
  type: number
  displayName: Github Release ID

steps:
- powershell: |
    $releaseParams = @{
      Uri = "https://api.github.com/repos/Microsoft/azure-pipelines-agent/releases/${{ parameters.releaseId }}";
      Method = 'DELETE';
      Headers = @{
        Authorization = 'Basic ' + [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("vsts:$(GithubToken)"));
      }
    }
    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12
    $releaseCreated = Invoke-RestMethod @releaseParams
